<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @contest.name %>
</p>

<p>
  <strong>Starts In:</strong>
  <%= @contest.starts_in.strftime("%d/%m/%Y - %H:%M") %>
</p>

<table class="table table-hover">
  <thead>
    <th>Competitor</th>
    <% if @contest.has_ended? %>
      <th>Wine</th>
      <th>Grapes</th>
      <th>Year</th>
      <th>Vivino Score</th>
      <th>Price</th>
      <th>Grade</th>
    <% end %>
  </thead>
  <tbody>
    <% @contest.wines.sort_by { |wine| !wine.grade }.each do |wine| %>
      <tr>
        <td><%= wine.user.email %></td>
        <% if @contest.has_ended? %>
          <td><%= wine.name %></td>
          <td>
            <% wine.grapes.each do |grape| %>
              <%= grape.name %><% if grape != wine.grapes.last %>, <% end %>
            <% end %>
          </td>
          <td><%= wine.year %></td>
          <td><%= wine.vivino_score %></td>
          <td><%= number_to_currency(wine.price, :unit => 'R$', :separator => ',') %></td>
          <td><%= wine.grade %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<% if can? :update, @contest %>
  <%= link_to 'Edit', edit_contest_path(@contest), :class => 'btn btn-default' %>
<% end %>
<%= link_to 'Back', contests_path, :class => 'btn btn-default' %>
